<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Platform-base by DnD-Enterprises</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-dark.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/DnD-Enterprises/platform-base">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/DnD-Enterprises/platform-base/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/DnD-Enterprises/platform-base/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Platform-base</h1>
          <p>Platform Base - Fork and change as necessary</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/DnD-Enterprises">DnD-Enterprises</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>

        <h2>
<a id="platform-base" class="anchor" href="#platform-base" aria-hidden="true"><span class="octicon octicon-link"></span></a>Platform Base</h2>

<h4>
<a id="ember" class="anchor" href="#ember" aria-hidden="true"><span class="octicon octicon-link"></span></a>Ember</h4>

<h2>
<a id="prerequisites" class="anchor" href="#prerequisites" aria-hidden="true"><span class="octicon octicon-link"></span></a>Prerequisites</h2>

<p>You will need the following things properly installed on your computer.</p>

<ul>
<li><a href="http://git-scm.com/">Git</a></li>
<li>
<a href="http://nodejs.org/">Node.js</a> (with NPM)</li>
<li><a href="http://bower.io/">Bower</a></li>
<li><a href="http://www.ember-cli.com/">Ember CLI</a></li>
<li><a href="http://phantomjs.org/">PhantomJS</a></li>
</ul>

<h3>
<a id="code-generators" class="anchor" href="#code-generators" aria-hidden="true"><span class="octicon octicon-link"></span></a>Code Generators</h3>

<p>Make use of the many generators for code, try <code>ember help generate</code> for more details</p>

<h2>
<a id="further-reading--useful-links" class="anchor" href="#further-reading--useful-links" aria-hidden="true"><span class="octicon octicon-link"></span></a>Further Reading / Useful Links</h2>

<ul>
<li><a href="http://emberjs.com/">ember.js</a></li>
<li><a href="http://www.ember-cli.com/">ember-cli</a></li>
<li>Development Browser Extensions

<ul>
<li><a href="https://chrome.google.com/webstore/detail/ember-inspector/bmdblncegkenkacieihfhpjfppoconhi">ember inspector for chrome</a></li>
<li><a href="https://addons.mozilla.org/en-US/firefox/addon/ember-inspector/">ember inspector for firefox</a></li>
</ul>
</li>
</ul>

<h2>
<a id="common-dev-practices" class="anchor" href="#common-dev-practices" aria-hidden="true"><span class="octicon octicon-link"></span></a>Common Dev Practices</h2>

<h4>
<a id="style-guides" class="anchor" href="#style-guides" aria-hidden="true"><span class="octicon octicon-link"></span></a>Style Guides</h4>

<pre><code>* [Style Guide](https://github.com/paulmillr/code-style-guides/)
</code></pre>

<h4>
<a id="general" class="anchor" href="#general" aria-hidden="true"><span class="octicon octicon-link"></span></a>General</h4>

<pre><code>* Run all commands from root of application
* Install all Node Modules at root of application
* If new global npm module is used then also add it to gulpfile.js (install-globals task)
</code></pre>

<h4>
<a id="git" class="anchor" href="#git" aria-hidden="true"><span class="octicon octicon-link"></span></a>GIT</h4>

<pre><code>* Never work on your master branch - This should only be used to synchronize with the upstream repo
* Every new ticket worked on should have its own branch - `git checkout -b DW-123`
* This branch will now send a pull request to the upstream master branch and ONLY after it is merged
* `git fetch upstream; git merge --no-edit upstream/master`
</code></pre>

<h4>
<a id="css--scss" class="anchor" href="#css--scss" aria-hidden="true"><span class="octicon octicon-link"></span></a>CSS / SCSS</h4>

<pre><code>* Always use .scss files rather than css
* Break up scss files per page / per module and import them all in app.scss
</code></pre>

<h4>
<a id="js" class="anchor" href="#js" aria-hidden="true"><span class="octicon octicon-link"></span></a>JS</h4>

<pre><code>* All files should not be more than 300 lines long
* Always put this at top of ember apps `import Ember from 'ember';`
* Always fix all JSHint errors as they show up or they will grow too large and tedious
</code></pre>

<h2>
<a id="setting-up-dev-environment-mac" class="anchor" href="#setting-up-dev-environment-mac" aria-hidden="true"><span class="octicon octicon-link"></span></a>Setting up Dev Environment (Mac)</h2>

<ul>
<li>
<p>Make sure you own /usr/local and /etc/paths.d</p>

<ul>
<li><code>sudo chown -R (whoami) /usr/local</code></li>
<li><code>sudo chown -R (whoami) /etc/paths.d/</code></li>
</ul>
</li>
<li>
<p>Show All Hidden Files</p>

<ul>
<li><code>defaults write com.apple.finder AppleShowAllFiles YES</code></li>
</ul>
</li>
<li>
<p>Setup Sublime 3 as a terminal command (optional)</p>

<ul>
<li><a href="http://c758482.r82.cf2.rackcdn.com/Sublime%20Text%20Build%203083.dmg">Download Sublime Text 3</a></li>
<li><code>ln -s "/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl" /usr/local/bin/sublime</code></li>
</ul>
</li>
<li>
<p>Install Atom (optional)</p>

<ul>
<li><a href="https://eggerapps.at/postico/download/">Download Atom</a></li>
</ul>
</li>
<li>
<p>Install Postico (optional)</p>

<ul>
<li><a href="https://eggerapps.at/postico/download/">Download Postico</a></li>
</ul>
</li>
<li>
<p>Install ImageMagick</p>

<ul>
<li><a href="http://cactuslab.com/imagemagick/assets/ImageMagick-6.9.1-0.pkg.zip">Download ImageMagick</a></li>
</ul>
</li>
<li>
<p>Install Homebrew</p>

<ul>
<li><code>ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"</code></li>
<li>Upgrade Brew -&gt; <code>brew update &amp;&amp; brew upgrade</code>
</li>
</ul>
</li>
<li>
<p>Install Watchman and python</p>

<ul>
<li><code>brew install watchman &amp;&amp; brew install python</code></li>
</ul>
</li>
<li>
<p>Install Postgres</p>

<ul>
<li><a href="https://github.com/PostgresApp/PostgresApp/releases/download/9.4.4.0/Postgres-9.4.4.0.zip">Download Postgres</a></li>
<li>Add to $PATH permanently -&gt; <code>echo '/Applications/Postgres.app/Contents/Versions/9.4/bin' &gt; /etc/paths.d/postgres</code>
</li>
</ul>
</li>
<li>
<p>Install MongoDB</p>

<ul>
<li><code>brew install mongodb --with-openssl</code></li>
<li><a href="https://github.com/remysaissy/mongodb-macosx-prefspane/raw/master/download/MongoDB.prefPane.zip">MongoDB PrefPane</a></li>
</ul>
</li>
<li>
<p>Install Sass</p>

<ul>
<li><code>gem install sass</code></li>
</ul>
</li>
<li>
<p>Install Node / NPM</p>

<ul>
<li><code>brew install node</code></li>
<li><code>npm install npm -g</code></li>
</ul>
</li>
<li>
<p>Download Source Code</p>

<ul>
<li><code>cd /path/where/you/want/to/install/code/base</code></li>
<li>Go to platform url -&gt; <a href="https://github.com/platform/platform.git">Platform</a>
</li>
<li>Fork Repo</li>
<li><code>git clone https://github.com/&lt;your-github-username&gt;/platform.git</code></li>
<li><code>cd platform</code></li>
</ul>
</li>
</ul>

<h3>
<a id="add-upstream" class="anchor" href="#add-upstream" aria-hidden="true"><span class="octicon octicon-link"></span></a>Add upstream</h3>

<ul>
<li><code>git remote add upstream https://github.com/DnD-Enterprises/platform-base.git</code></li>
<li><code>git branch --unset-upstream</code></li>
</ul>

<h3>
<a id="configuring-application" class="anchor" href="#configuring-application" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuring Application</h3>

<ul>
<li><p><code>npm run init-app</code> // *** THIS MAY NOT ACTUALLY WORK ***</p></li>
<li>
<p>Install Global Modules</p>

<ul>
<li><code>npm run install-globals</code></li>
<li>OR</li>
<li><code>npm install -g gulp</code></li>
<li><code>npm install -g bower</code></li>
<li><code>npm install -g ember-cli</code></li>
<li><code>npm install -g grunt-cli</code></li>
<li><p><code>npm install -g broccoli-cli</code></p></li>
<li><p><code>npm install -g pm2</code></p></li>
<li><code>npm install -g nodemon</code></li>
<li><code>npm install -g phantomjs</code></li>
<li><code>npm install -g node-inspector</code></li>
</ul>
</li>
<li>
<p>Create Certificates</p>

<ul>
<li>sh bin/make-fake-cert.sh</li>
</ul>
</li>
</ul>

<h2>
<a id="install-nginx---we-are-going-to-also-make-sure-we-can-use-port-80" class="anchor" href="#install-nginx---we-are-going-to-also-make-sure-we-can-use-port-80" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install Nginx - We are going to also make sure we can use port 80</h2>

<ul>
<li>
<p>Further Reading - <a href="http://derickbailey.com/2014/12/27/how-to-start-nginx-on-port-80-at-mac-osx-boot-up-log-in/">Set up Nginx on Port 80</a></p>

<ul>
<li><code>brew tap homebrew/nginx</code></li>
<li><p><code>brew install nginx-full --with-spdy --with-file-aio --with-ipv6 --with-http_ssl_module --with-http_spdy_module --with-http_realip_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_stub_status_module --with-http_perl_module --with-pcre --with-debug</code></p></li>
<li>
<p>To have launchd start nginx at login:</p>

<ul>
<li><code>sudo cp /usr/local/opt/nginx-full/*.plist /Library/LaunchDaemons</code></li>
</ul>
</li>
<li>
<p>Then to load nginx now:</p>

<ul>
<li><code>sudo chown root:wheel /Library/LaunchDaemons/homebrew.mxcl.nginx-full.plist</code></li>
<li><code>sudo launchctl load -w /Library/LaunchDaemons/homebrew.mxcl.nginx-full.plist</code></li>
</ul>
</li>
<li>
<p>Setup Config</p>

<ul>
<li><code>sh bin/make-fake-cert.sh</code></li>
<li><code>sh bin/nginx-config.sh</code></li>
</ul>
</li>
<li>
<p>Setup Private Hosts</p>

<ul>
<li>
<code>sudo nano /private/etc/hosts</code> OR <code>sudo sublime /private/etc/hosts</code>
</li>
<li>Copy The text below into this file (one per line)</li>
</ul>

<pre><code>    127.0.0.1 platform.local.com
    127.0.0.1 platform.local.co.uk
    127.0.0.1 www.platform.local.com
    127.0.0.1 www.platform.local.co.uk

    127.0.0.1 app.platform.local.com
    127.0.0.1 app.platform.local.co.uk
    127.0.0.1 www.app.platform.local.com
    127.0.0.1 www.app.platform.local.co.uk

    127.0.0.1 intranet.platform.local.com
    127.0.0.1 intranet.platform.local.co.uk
    127.0.0.1 www.intranet.platform.local.com
    127.0.0.1 www.intranet.platform.local.co.uk
</code></pre>

<ul>
<li><code>dscacheutil -flushcache; sudo killall -HUP mDNSResponder</code></li>
</ul>
</li>
</ul>
</li>
</ul>

<h3>
<a id="starting-application" class="anchor" href="#starting-application" aria-hidden="true"><span class="octicon octicon-link"></span></a>Starting Application</h3>

<ul>
<li>Make sure postgres is started</li>
<li><code>sh bin/npm-bower-install.sh</code></li>
<li><code>npm run start-dev</code></li>
</ul>

<h2>
<a id="building" class="anchor" href="#building" aria-hidden="true"><span class="octicon octicon-link"></span></a>Building</h2>

<ul>
<li><code>npm run build</code></li>
<li>
<code>npm run build-prod</code> (production)</li>
</ul>

<h2>
<a id="testing" class="anchor" href="#testing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Testing</h2>

<ul>
<li><code>npm test</code></li>
</ul>

<h2>
<a id="deployment" class="anchor" href="#deployment" aria-hidden="true"><span class="octicon octicon-link"></span></a>Deployment</h2>

<ul>
<li>Install Deployment tools

<ul>
<li><code>pip install boto &amp;&amp; pip install awscli &amp;&amp; pip install awsebcli</code></li>
<li><code>aws configure</code></li>
</ul>
</li>
</ul>

<h4>
<a id="elastic-beanstalk-create" class="anchor" href="#elastic-beanstalk-create" aria-hidden="true"><span class="octicon octicon-link"></span></a>Elastic Beanstalk Create</h4>

<ul>
<li><code>eb init</code></li>
<li><code>eb create</code></li>
<li><code>eb status --verbose</code></li>
<li><code>eb deploy</code></li>
</ul>

<h4>
<a id="elastic-beanstalk-ssh" class="anchor" href="#elastic-beanstalk-ssh" aria-hidden="true"><span class="octicon octicon-link"></span></a>Elastic Beanstalk SSH</h4>

<ul>
<li><code>eb ssh --setup</code></li>
<li><code>eb ssh</code></li>
</ul>

<h4>
<a id="elastic-beanstalk-terminate" class="anchor" href="#elastic-beanstalk-terminate" aria-hidden="true"><span class="octicon octicon-link"></span></a>Elastic Beanstalk Terminate</h4>

<ul>
<li><code>eb terminate</code></li>
<li><code>eb terminate-all</code></li>
</ul>

<h4>
<a id="aws-create-version" class="anchor" href="#aws-create-version" aria-hidden="true"><span class="octicon octicon-link"></span></a>AWS Create Version</h4>

<ul>
<li><code>git tag -a &lt;version-tag&gt; -m "Deployment Tag"</code></li>
<li><code>eb deploy</code></li>
</ul>

<h4>
<a id="how-to-deploy" class="anchor" href="#how-to-deploy" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to deploy</h4>

<ul>
<li><code>npm run deploy</code></li>
</ul>

<h4>
<a id="configuring-nginx--application--environment" class="anchor" href="#configuring-nginx--application--environment" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuring Nginx / Application / Environment</h4>

<ul>
<li><code>npm run init-app</code></li>
</ul>

<h4>
<a id="updating-application" class="anchor" href="#updating-application" aria-hidden="true"><span class="octicon octicon-link"></span></a>Updating Application</h4>

<ul>
<li><code>npm run update-app</code></li>
</ul>

<h3>
<a id="deployment-files" class="anchor" href="#deployment-files" aria-hidden="true"><span class="octicon octicon-link"></span></a>Deployment Files</h3>

<ul>
<li>All files can be found in the .ebextensions directory</li>
<li>files.config - holds the files we will be storing on the system i.e. nginx.conf</li>
<li>commands.config - holds the commands we will run on elastic beanstalk before and after the application is retrieved</li>
<li>settings.config - holds the settings we pass to set up the elastic beanstalk console</li>
<li>services.config - holds the sysvinit settings we want to have the system run</li>
<li>environment.config - holds environment variables like passwords and keys and should never be checked in to the repo</li>
</ul>

<h2>
<a id="live-reload" class="anchor" href="#live-reload" aria-hidden="true"><span class="octicon octicon-link"></span></a>Live Reload</h2>

<ul>
<li>Website - Port: 39000, Nginx Incoming Port: N/A</li>
<li>Intranet - Port: 38000, Nginx Incoming Port: 38100</li>
<li>App - Port: 39000, Nginx Incoming Port: 39100</li>
<li>API - Uses Nodemon</li>
<li>To initiate live reloads (due to the fact we are using self signed certificates) you need to visit these urls

<ul>
<li><a href="https://doctify.local.com:39000/livereload">Website Web Socket</a></li>
<li><a href="https://app.doctify.local.com:37100/livereload">App Web Socket</a></li>
<li><a href="https://intranet.doctify.local.com:38100/livereload">Intranet Web Socket</a></li>
</ul>
</li>
</ul>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
